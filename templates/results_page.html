{% extends "base.html" %}
{% block content %}
<br>
<br>
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
    <h1>Результаты тестирования</h1>
    <form method="POST" action="{{ url_for('results') }}" onsubmit="return confirm('Вы уверены, что хотите очистить все результаты? Это действие нельзя отменить!');">
        <input type="hidden" name="clear_results" value="true">
        <button type="submit" style="background-color: #dc3545; color: white; padding: 8px 16px; border: none; border-radius: 4px; cursor: pointer;">
            Очистить все результаты
        </button>
    </form>
</div>
<form method="GET" action="{{ url_for('results') }}">
    <label for="class_filter">Выберите класс:</label>
    <select name="class_filter" id="class_filter">
        <option value="">Все классы</option>
        <option value="11а" {% if request.args.get('class_filter') == '11а' %} selected {% endif %}>11а</option>
        <option value="11б" {% if request.args.get('class_filter') == '11б' %}selected{% endif %}>11б</option>
    </select>
    <button type="submit">Применить</button>
</form>
<table class="table table-striped" border="1">
    <thead>
        <tr>
            <th>Ученик</th>
            <th>Тест №1</th>
            <th>Тест №2</th>
            <th>Тест №3</th>
            <th>Тест №4</th>
            <th>Тест №5</th>
        </tr>
    </thead>
    <tbody>
        {% for i in test %}
        <tr>
            <td>{{ i.user_id }}</td>
            <td>
                {% set parts = i.test1.split(' - ') %}
                {{ parts[0] }} - <span style="color: blue;">{{ parts[1] }}</span></td>
            <td>
                {% set parts = i.test2.split(' - ') %}
                {{ parts[0] }} - <span style="color:  blue;">{{ parts[1] }}</span>
            </td>
            <td>
                {% set parts = i.test3.split(' - ') %}
                {{ parts[0] }} - <span style="color:  blue;">{{ parts[1] }}</span>
            </td>
            <td>
                {% set parts = i.test4.split(' - ') %}
                {{ parts[0] }} - <span style="color:  blue;">{{ parts[1] }}</span>
            </td>
            <td>
                {% set parts = i.test5.split(' - ') %}
                {{ parts[0] }} - <span style="color:  blue;">{{ parts[1] }}</span>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}